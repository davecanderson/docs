import{_ as e,a as t}from"./chunks/CustomerDetails-html.6e61daf2.js";import{_ as a,o as s,c as o,a as r}from"./app.2aea72c0.js";const b=`{"title":"HTML5 JSON Report Format","description":"","frontmatter":{"slug":"html5reportformat","title":"HTML5 JSON Report Format"},"headers":[{"level":2,"title":"Lightweight Customizable HTML Templates","slug":"lightweight-customizable-html-templates"},{"level":3,"title":"The Magic AutoGrid Partial","slug":"the-magic-autogrid-partial"},{"level":3,"title":"Human Friendly output","slug":"human-friendly-output"},{"level":3,"title":"Completely self-contained","slug":"completely-self-contained"},{"level":3,"title":"Embeds the complete snapshot of your web services data","slug":"embeds-the-complete-snapshot-of-your-web-services-data"},{"level":3,"title":"It's Fast","slug":"it-s-fast"},{"level":3,"title":"Well supported in all modern browsers","slug":"well-supported-in-all-modern-browsers"},{"level":3,"title":"It Validates (as reported by validator.w3.org)","slug":"it-validates-as-reported-by-validator-w3-org"},{"level":3,"title":"Advantages of a strong-typed, code-first web service framework","slug":"advantages-of-a-strong-typed-code-first-web-service-framework"},{"level":3,"title":"Disable Auto HTML Pages","slug":"disable-auto-html-pages"}],"relativePath":"html5reportformat.md"}`,n={},i=r('<p>These examples are simply links to existing ServiceStack web services, which based on your browsers user-agent (i.e. Accept: &#39;text/html&#39;) provides this HTML format instead of the other serialization formats.</p><table><thead><tr><th>Northwind API</th><th></th><th></th></tr></thead><tbody><tr><td>All Customers</td><td><a href="https://northwind.netcore.io/customers" target="_blank" rel="noopener noreferrer">html</a></td><td><a href="https://northwind.netcore.io/customers.json" target="_blank" rel="noopener noreferrer">json</a></td></tr><tr><td>Customer Details</td><td><a href="https://northwind.netcore.io/customers/ALFKI" target="_blank" rel="noopener noreferrer">html</a></td><td><a href="https://northwind.netcore.io/customers/ALFKI.json" target="_blank" rel="noopener noreferrer">json</a></td></tr><tr><td>Customer Orders</td><td><a href="https://northwind.netcore.io/orders" target="_blank" rel="noopener noreferrer">html</a></td><td><a href="https://northwind.netcore.io/orders.json" target="_blank" rel="noopener noreferrer">json</a></td></tr></tbody></table><div class="not-prose mt-8 flex items-center"><a class="block" href="https://northwind.netcore.io/customers/ALFKI.json"><img class="" src="'+e+'"></a><div class="flex flex-col items-center px-2 text-lg font-bold text-green-700"><div>JSON</div><svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"></path></svg><div>HTML</div></div><a class="block" href="https://northwind.netcore.io/customers/ALFKI"><img class="" src="'+t+`"></a></div><p>To see it in action, <strong>view the source</strong> in your browser. Webkit and Firefox users can simply go to the url below:</p><div class="language-"><pre><code>view-source:https://northwind.netcore.io/customers/ALFKI
</code></pre></div><p>Note: To view the web services in a different format simply append either <strong>.{ext}</strong> or <strong>?format={ext}</strong> to the query string, e.g:</p><div class="language-"><pre><code>/customers.json
/customers?format=[json|xml|html|csv|jsv]
</code></pre></div><h2 id="lightweight-customizable-html-templates" tabindex="-1">Lightweight Customizable HTML Templates <a class="header-anchor" href="#lightweight-customizable-html-templates" aria-hidden="true">#</a></h2><p>ServiceStack&#39;s auto HTML response pages can be overridden specific routes by populating <code>HtmlFormat.PathTemplates</code> with a lightweight HTML template, e.g. the <code>/auth</code> page is pre-configured with:</p><div class="language-csharp"><pre><code>GetPlugin<span class="token operator">&lt;</span>HtmlFormat<span class="token operator">&gt;</span><span class="token punctuation">.</span>PathTemplates<span class="token punctuation">[</span><span class="token string">&quot;/auth&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;/Templates/Auth.html&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>Specifying the <strong>/path/info</strong> to override and the <strong>VirtualPath</strong> of the static HTML page that should be returned instead.</p><p>That instead of the JSON HTML Dump of the <code>/auth</code> endpoint, now returns a static <code>.html</code> page to display the <code>AuthenticateResponse</code> DTO in a beautified custom HTML view:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/auth-page.png" alt=""></p><p>The static HTML templates will replace these variable placeholders which will allow you to render a custom view of service responses:</p><ul><li><code>\${Dto}</code> JSON Response DTO</li><li><code>\${BaseUrl}</code> - <code>IRequest.GetBaseUrl()</code></li><li><code>\${ServiceUrl}</code> - Service URL</li></ul><h3 id="the-magic-autogrid-partial" tabindex="-1"><a href="https://github.com/ServiceStackApps/HttpBenchmarks#the-magic-autogrid-partial" target="_blank" rel="noopener noreferrer">The Magic AutoGrid Partial</a> <a class="header-anchor" href="#the-magic-autogrid-partial" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStack/HttpBenchmarks/blob/master/src/BenchmarksAnalyzer/Views/SearchTestResults.cshtml" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/HttpBenchmarks/master/src/BenchmarksAnalyzer/Content/img/search-filter.png" alt=""></a></p><p>A bootstrap themed version of HTML Format is also encapsulated within an <a href="https://github.com/ServiceStack/HttpBenchmarks/blob/master/src/BenchmarksAnalyzer/Views/Shared/AutoGrid.cshtml" target="_blank" rel="noopener noreferrer">AutoGrid.cshtml</a> partial which does the heavy lifting of converting any C# enumerable into a human optimized dynamic sortable datagrid with just 1 Line of Code:</p><div class="language-csharp"><pre><code>@Html<span class="token punctuation">.</span><span class="token function">Partial</span><span class="token punctuation">(</span><span class="token string">&quot;AutoGrid&quot;</span><span class="token punctuation">,</span> Model<span class="token punctuation">.</span>Results<span class="token punctuation">)</span>
</code></pre></div><h3 id="human-friendly-output" tabindex="-1">Human Friendly output <a class="header-anchor" href="#human-friendly-output" aria-hidden="true">#</a></h3><p>The primary focus for the HTML Format is to provide a readable and semantic HTML layout letting you visualize all the data returned by your web service with a single glance. Features include:</p><p>Based on convention, it generates a recursive and cascading view of your data using a combination of different sized definition lists and tables where appropriate. After it&#39;s rendered convenience behaviour is applied allowing you to sort your tabular data, view the embedded JSON contents as well as providing links back to the original web service that generated the report including links to the other formats supported.</p><h3 id="completely-self-contained" tabindex="-1">Completely self-contained <a class="header-anchor" href="#completely-self-contained" aria-hidden="true">#</a></h3><p>The report does not have any external CSS, JavaScript or Images which also helps achieve its super-fast load-time and rendering speed.</p><h3 id="embeds-the-complete-snapshot-of-your-web-services-data" tabindex="-1">Embeds the complete snapshot of your web services data <a class="header-anchor" href="#embeds-the-complete-snapshot-of-your-web-services-data" aria-hidden="true">#</a></h3><p>The report embeds a complete, unaltered version of your &#39;JSON webservice&#39; capturing a snapshot of the state of your data at a given point in time. It&#39;s perfect for backups with the same document containing a human and programatic access to the data. The JSON data is embedded inside a valid and well-formed document, making it programmatically accessible using a standard XML/HTML parser. The report also includes an interface to allow humans to copy it from a textbox.</p><h3 id="it-s-fast" tabindex="-1">It&#39;s Fast <a class="header-anchor" href="#it-s-fast" aria-hidden="true">#</a></h3><p>Like the other web services, the HTML format is just a raw C# IHttpHandler using <a href="http://www.servicestack.net/mythz_blog/?p=344" target="_blank" rel="noopener noreferrer">.NET&#39;s fastest JSON Serializer</a> to serialize the response DTO to a JSON string which is embedded inside a <strong>static HTML string template</strong>. No other .aspx page or MVC web framework is used to get in the way to slow things down. High performance JavaScript techniques are also used to start generating the report at the earliest possible time.</p><h3 id="well-supported-in-all-modern-browsers" tabindex="-1">Well supported in all modern browsers <a class="header-anchor" href="#well-supported-in-all-modern-browsers" aria-hidden="true">#</a></h3><p>It&#39;s tested and works equally well on the latest versions of Chrome, Firefox, Safari, Opera and IE9. <a href="https://github.com/ServiceStack/ServiceStack/downloads" target="_blank" rel="noopener noreferrer">v1.83</a> Now works in IE8 but needs internet connection to download json2.js. (not tested in &lt;=IE7)</p><h3 id="it-validates-as-reported-by-validator-w3-org" tabindex="-1">It Validates (as reported by <a href="http://validator.w3.org" target="_blank" rel="noopener noreferrer">validator.w3.org</a>) <a class="header-anchor" href="#it-validates-as-reported-by-validator-w3-org" aria-hidden="true">#</a></h3><p>This shouldn&#39;t be important but as the technique of using JavaScript to generate the entire report is likely to ire the semantic HTML police, I thought I&#39;d make this point. Personally I believe this style of report is more useful since it caters for both human and scripted clients.</p><h1 id="how-it-works-view-source-reveals-all" tabindex="-1">How it works - &#39;view-source&#39; reveals all \u{1F603} <a class="header-anchor" href="#how-it-works-view-source-reveals-all" aria-hidden="true">#</a></h1><p>This is a new type of HTML5 report that breaks the normal conventional techniques of generating a HTML page. Instead of using a server programming and template language to generate the HTML on the server, the data is simply embedded as JSON, unaltered inside the tag:</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dto<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/json<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{jsondto}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Because of the browser behaviour of the script tag, you can embed any markup or javascript unescaped. Unless it has none or a &#39;javascript&#39; type attribute, the browser doesn&#39;t execute it letting you to access the contents with:</p><div class="language-js"><pre><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;dto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>
</code></pre></div><p>From there, javascript invoked just before the closing body tag (i.e. the fastest time to run DOM-altering javascript) which takes the data, builds up a html string and injects the generated markup in the contents of the page.</p><p>After the report is rendered, and because JavaScript can \u{1F603} UX-friendly behaviours are applied to the document allowing the user to sort the table data on each column as well as providing an easy way to take a copy of the JSON datasource.</p><p>For what it does, the JavaScript is very terse considering no JavaScript framework was used. In most cases the JSON payload is a lot larger than the entire JavaScript used to render the report \u{1F603}</p><h3 id="advantages-of-a-strong-typed-code-first-web-service-framework" tabindex="-1">Advantages of a strong-typed, code-first web service framework <a class="header-anchor" href="#advantages-of-a-strong-typed-code-first-web-service-framework" aria-hidden="true">#</a></h3><p>Although hard to believe, most of the above web service examples were developed before ServiceStack&#39;s CSV and HTML format existed. No code-changes were required in order to take advantage of the new formats, they were automatically available after replacing the ServiceStack.dlls with the latest version (v1.81+)</p><p>Being able to generically provide new features like this shows the advantage of ServiceStack&#39;s strong-typed, code-first approach to developing web services that lets you focus on your app-specific logic as you only need to return C#/.NET objects or throw C#/.NET exceptions which gets automatically handled, and hosted on a number of different endpoints in a variety of different formats.</p><p>Out of the box REST, RPC and SOAP endpoints types are automatically provided, in JSON, XML, CSV, JSV and now the new HTML report format above.</p><h3 id="disable-auto-html-pages" tabindex="-1">Disable Auto HTML Pages <a class="header-anchor" href="#disable-auto-html-pages" aria-hidden="true">#</a></h3><p>ServiceStack&#39;s fallback <a href="/html5reportformat">Auto HTML Report Pages</a> can be disabled with:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span>
    EnableAutoHtmlResponses <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>When disabled it will render Response DTOs from Browser requests (i.e. <code>Accept:text/html</code>) in the next <code>Config.PreferredContentTypes</code> - (JSON by default).</p>`,48),l=[i];function p(c,d,h,u,m,g){return s(),o("div",null,l)}var w=a(n,[["render",p]]);export{b as __pageData,w as default};
